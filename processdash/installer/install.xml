<installation version="1.0">

    <info>
        <appname>Process Dashboard</appname>
        <appversion>@version@</appversion>
        <authors>
            <author email="ken_raisor@users.sourceforge.net" name="Ken Raisor"/>
            <author email="rickreynolds@users.sourceforge.net" name="Rick Reynolds"/>
            <author email="rognon@users.sourceforge.net" name="Jonathan Tellier"/>
            <author email="tuma@users.sourceforge.net" name="David Tuma"/>
        </authors>
        <url>http://www.processdash.com</url>
	<javaversion>1.5</javaversion>
    </info>

    <guiprefs height="480" resizable="yes" width="640"/>

    <locale>
        <langpack iso3="eng"/>
        <langpack iso3="jpn"/>
        <langpack iso3="chn"/>
        <langpack iso3="deu"/>
    </locale>

    <!-- The resources needed by the various panels -->
    <resources>
        <res src="files/install.png" id="installer.langsel.img"/>
        <res src="files/DashInfo.html" id="HTMLInfoPanel.info"/>
        <res src="files/DashInfo-jpn.html" id="HTMLInfoPanel.info_jpn"/>
        <res src="files/DashInfo-chn.html" id="HTMLInfoPanel.info_chn"/>
        <res src="files/DashLicense.html" id="HTMLLicencePanel.licence"/>
        <res src="files/DashLicense-jpn.html" id="HTMLLicencePanel.licence_jpn"/>
        <res src="files/DashLicense-chn.html" id="HTMLLicencePanel.licence_chn"/>
        <res src="files/DashLicense-deu.html" id="HTMLLicencePanel.licence_deu"/>
        <res src="files/DataDir-windows.txt" id="DataDirPanel.dir.windows"/>
        <res src="files/DataDir-macosx.txt" id="DataDirPanel.dir.macosx"/>
        <res src="files/TargetDir-macosx.txt" id="TargetPanel.dir.macosx"/>
        <res src="files/WebInstallers.txt" id="WebInstallers.url"/>
        <res src="files/shortcutSpec.xml" id="shortcutSpec.xml"/>
        <res src="files/PspLicense.html" id="CondHTMLLicencePanel0.licence"/>
        <res src="files/PspLicense-list.txt" id="CondHTMLLicencePanel0.packList"/>
        <res src="files/JHLicense.html" id="CondHTMLLicencePanel1.licence"/>
        <res src="files/JHLicense-list.txt" id="CondHTMLLicencePanel1.packList"/>
        <res src="files/custom-install-internal.ini" id="custom-install.ini"
             excludeIf="pspForEngInstr"/>
        <res src="files/custom-install-instr.ini" id="custom-install.ini"
             includeIf="pspForEngInstr"/>
        <res src="files/text-eng.xml" id="text.xml"/>
        <res src="files/text-jpn.xml" id="text.xml_jpn"/>
        <res src="files/text-chn.xml" id="text.xml_chn"/>
        <res src="files/text-deu.xml" id="text.xml_deu"/>

        <!-- additional resources -->
    </resources>

    <!-- The panels to display -->
    <panels>
        <panel classname="HelloPanel"/>
        <panel classname="HTMLInfoPanel"/>
        <panel classname="HTMLLicencePanel"/>
        <panel classname="TargetPanel"/>
        <panel classname="PacksPanel"/>
        <panel classname="DataDirPanel"/>
        <panel classname="TeamDataDirPanel"/>
        <panel classname="CondHTMLLicencePanel"/>
        <panel classname="CondHTMLLicencePanel"/>
        <panel classname="ShutdownDashboardPanel"/>
        <panel classname="InstallPanel"/>
        <panel classname="ShortcutPanel"/>
        <panel classname="FinishPanel"/>
    </panels>
    
    <!-- The native libraries to add -->
    <native type="izpack" name="ShellLink.dll"/>

    <!-- The list of packages the user can install -->
    <packs>
        <pack name="Process Dashboard" id="pdash" required="yes">
            <description>Process Dashboard</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspdash.jar"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/l10nTool.jar"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/extras.jar" includeIf="extras"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../src/net/sourceforge/processdash/ui/dashicon.ico"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../src/net/sourceforge/processdash/ui/launcher.ico"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="files/mergeSettings.jar"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="files/cleanupMacData.jar">
                <os name="Mac OS X"/>
            </file>

            <!-- Create an Application icon on Mac OS X -->
            <fileset targetdir="$MAC_APPL/Process Dashboard.app"
                  dir="files/dashboard_app" override="true">
                <os name="Mac OS X"/>
                <include name="Contents/"/>
                <exclude name="**/JavaApplicationStub-License.rtf"/>
            </fileset>
            <parsable targetfile="$MAC_APPL/Process Dashboard.app/Contents/Info.plist">
                <os name="Mac OS X"/>
            </parsable>
            <parsable targetfile="$MAC_APPL/Process Dashboard.app/Contents/Resources/dataLocation.txt">
                <os name="Mac OS X"/>
            </parsable>
            <executable targetfile="/Applications/Process Dashboard.app/Contents/MacOS/JavaApplicationStub" stage="never">
	        <os name="Mac OS X"/>
	    </executable>

            <!-- create a script file for unix variants -->
            <file targetdir="$DATA_PATH" src="files/run-dash.sh"
	          override="false"/>
            <parsable targetfile="$DATA_PATH/run-dash.sh"/>
            <executable targetfile="$DATA_PATH/run-dash.sh" stage="never">
	        <os family="unix"/>
	    </executable>

            <!-- migrate/cleanup data from old Mac installations -->
            <executable targetfile="$INSTALL_PATH/cleanupMacData.jar"
	         type="jar" stage="postinstall">
                <os name="Mac OS X"/>
		<args>
		    <arg value="$DATA_PATH"/>
		</args>
	    </executable>

            <!-- enhance user's config with externally provided settings -->
            <executable targetfile="$INSTALL_PATH/mergeSettings.jar"
	         type="jar" stage="postinstall">
		<args>
		    <arg value="$DATA_PATH"/>
		    <arg value="$EXTERNAL_CONFIG_URL1"/>
		    <arg value="$EXTERNAL_CONFIG_URL2"/>
		</args>
	    </executable>

	    <!-- additional core files -->
        </pack>
	
        <pack name="PSP(SM) Processes" id="pspProc" required="no"
	      excludeIf="noProc">
            <description>PSP(SM) Processes</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspProc2.jar" />
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/importPSP.jar" />
        </pack>

        <pack name="PSP(SM) for Engineers" id="pspForEng" required="no"
              includeIf="pspForEng">
            <description>PSP(SM) for Engineers</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspProc2.jar" />
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspForEng.jar" />
		  
            <!-- copy the pspForEng data files into the data directory. -->
            <fileset targetdir="$DATA_PATH" override="false"
                  dir="../Templates/@userDataDir@">
                <include name="*.dat"/>
                <include name="*.def"/>
                <include name="pspdash.ini"/>
                <include name="state"/>
                <include name="time.log"/>
                <include name="import/*.pdash"/>
            </fileset>
        </pack>

        <pack name="PSP(SM) Fundamentals &amp; Advanced" id="pspFundAdv" required="no"
              includeIf="pspFundAdv">
            <description>PSP(SM) Fundamentals &amp; Advanced</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspProc2.jar" />
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspForEng.jar" />
		  
            <!-- copy the pspFundAdv data files into the data directory. -->
            <fileset targetdir="$DATA_PATH" override="false"
                  dir="../Templates/pspForEng3/userDataFA">
                <include name="import/*.pdash"/>
            </fileset>
        </pack>

        <pack name="PSP(SM) Instructor Tools" id="pspInstrTools" required="no"
              includeIf="pspInstrTools">
            <description>Tools to assist instructors of the PSP for Engineers course</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspProc2.jar" />
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspForEng.jar" />
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspForEng-instr.jar"/>
        </pack>

        <pack name="JavaHelp(TM) Help Browser" id="javaHelp" required="no"
              excludeIf="noHelp">
            <description>JavaHelp(TM) Help Browser</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/dashHelp.jar"/>
        </pack>
	
        <!-- additional packs -->

    </packs>
</installation>
