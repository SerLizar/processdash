<installation version="1.0">

    <info>
        <appname>Process Dashboard</appname>
        <appversion>@version@</appversion>
        <authors>
            <author email="ken_raisor@users.sourceforge.net" name="Ken Raisor"/>
            <author email="rickreynolds@users.sourceforge.net" name="Rick Reynolds"/>
            <author email="tuma@users.sourceforge.net" name="David Tuma"/>
        </authors>
        <url>http://processdash.sourceforge.net</url>
	<javaversion>1.4</javaversion>
    </info>

    <guiprefs height="480" resizable="yes" width="640"/>

    <locale>
        <langpack iso3="eng"/>
        <langpack iso3="jpn"/>
        <langpack iso3="chn"/>
    </locale>

    <!-- The resources needed by the various panels -->
    <resources>
        <res src="files/install.png" id="installer.langsel.img"/>
        <res src="files/DashInfo.html" id="HTMLInfoPanel.info"/>
        <res src="files/DashInfo-chn.html" id="HTMLInfoPanel.info_chn"/>
        <res src="files/DashLicense.html" id="HTMLLicencePanel.licence"/>
        <res src="files/DashLicense-jpn.html" id="HTMLLicencePanel.licence_jpn"/>
        <res src="files/DashLicense-chn.html" id="HTMLLicencePanel.licence_chn"/>
        <res src="files/DataDir-windows.txt" id="DataDirPanel.dir.windows"/>
        <res src="files/WebInstallers.txt" id="WebInstallers.url"/>
        <res src="files/shortcutSpec.xml" id="shortcutSpec.xml"/>
        <res src="files/AWLicense.html" id="CondHTMLLicencePanel0.licence"/>
        <res src="files/AWLicense-list.txt" id="CondHTMLLicencePanel0.packList"/>
        <res src="files/JHLicense.html" id="CondHTMLLicencePanel1.licence"/>
        <res src="files/JHLicense-list.txt" id="CondHTMLLicencePanel1.packList"/>
        <res src="files/text-eng.xml" id="text.xml"/>
        <res src="files/text-jpn.xml" id="text.xml_jpn"/>
        <res src="files/text-chn.xml" id="text.xml_chn"/>

        <!-- additional resources -->
    </resources>

    <!-- The panels to display -->
    <panels>
        <panel classname="HelloPanel"/>
        <panel classname="HTMLInfoPanel"/>
        <panel classname="HTMLLicencePanel"/>
        <panel classname="TargetPanel"/>
        <panel classname="PacksPanel"/>
        <panel classname="DataDirPanel"/>
        <panel classname="TeamDataDirPanel"/>
        <panel classname="CondHTMLLicencePanel"/>
        <panel classname="CondHTMLLicencePanel"/>
        <panel classname="ShutdownDashboardPanel"/>
        <panel classname="InstallPanel"/>
        <panel classname="ShortcutPanel"/>
        <panel classname="FinishPanel"/>
    </panels>
    
    <!-- The native libraries to add -->
    <native type="izpack" name="ShellLink.dll"/>

    <!-- The list of packages the user can install -->
    <packs>
        <pack name="Process Dashboard" id="pdash" required="yes">
            <description>Process Dashboard</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspdash.jar"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../src/net/sourceforge/processdash/ui/icon32.ico"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="files/mergeSettings.jar"/>
            <file targetdir="$INSTALL_PATH/Uninstaller" override="true"
	          src="files/regInst.exe" os="windows"/>
            <file targetdir="$INSTALL_PATH" override="true"
	          src="files/regInst.exe" os="windows"/>

            <file targetdir="$DATA_PATH" src="files/run-dash.sh"
	          override="false"/>
            <parsable targetfile="$DATA_PATH/run-dash.sh"/>
            <executable targetfile="$DATA_PATH/run-dash.sh" stage="never">
	        <os family="unix"/>
	    </executable>

            <executable targetfile="$INSTALL_PATH/mergeSettings.jar"
	         type="jar" stage="postinstall">
		<args>
		    <arg value="$DATA_PATH"/>
		    <arg value="$EXTERNAL_CONFIG_URL1"/>
		    <arg value="$EXTERNAL_CONFIG_URL2"/>
		</args>
	    </executable>

            <executable targetfile="$INSTALL_PATH/regInst.exe"
	         stage="postinstall">
                <os family="windows"/>
		<args>
		    <arg value="-reg"/>
		    <arg value="Process Dashboard"/>
		    <arg value="Process Dashboard"/>
		    <arg value="@version@"/>
		    <arg value="$INSTALL_PATH\Uninstaller\uninstaller.jar"/>
		    <arg value="$INSTALL_PATH"/>
		    <arg value="$DATA_PATH"/>
		</args>
	    </executable>

            <executable targetfile="$INSTALL_PATH/Uninstaller/regInst.exe"
	          stage="uninstall">
	        <os family="windows"/>
		<args>
		    <arg value="-unreg"/>
		    <arg value="Process Dashboard"/>
		</args>
	    </executable>
	    <!-- additional core files -->
        </pack>
	
        <pack name="PSP(SM) Processes" id="pspProc" required="no"
	      excludeIf="noProc">
            <description>PSP(SM) Processes</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspProc.jar" />
        </pack>

        <pack name="PSP(SM) for Engineers" id="pspForEng" required="no"
              includeIf="pspForEng">
            <description>PSP(SM) for Engineers</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspProc.jar" />
            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/pspForEng.jar" />
		  
            <!-- copy the pspForEng data files into the data directory. -->
            <fileset targetdir="$DATA_PATH" override="false"
                  dir="../Templates/@userDataDir@">
                <include name="*.dat"/>
                <include name="*.def"/>
                <include name="pspdash.ini"/>
                <include name="state"/>
                <include name="time.log"/>
            </fileset>
        </pack>

        <pack name="JavaHelp(TM) Help Browser" id="javaHelp" required="no"
              excludeIf="noHelp">
            <description>JavaHelp(TM) Help Browser</description>

            <file targetdir="$INSTALL_PATH" override="true"
	          src="../dist/dashHelp.jar"/>
        </pack>
	
        <!-- additional packs -->

    </packs>
</installation>
